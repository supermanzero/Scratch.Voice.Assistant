<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áã¨Á´ãTTSË∞ÉËØïÈ°µÈù¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input[type="text"], textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        
        input[type="text"]:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #007bff;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .voice-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .voice-option {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .voice-option:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }
        
        .voice-option.selected {
            border-color: #007bff;
            background-color: #e3f2fd;
        }
        
        .voice-option input[type="radio"] {
            margin-right: 8px;
        }
        
        .voice-name {
            font-weight: 600;
            color: #333;
        }
        
        .voice-description {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
        }
        
        .btn-primary:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #545b62;
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #218838;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .status.loading {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .audio-controls {
            margin-top: 20px;
            text-align: center;
        }
        
        audio {
            width: 100%;
            margin-top: 10px;
        }
        
        .debug-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .debug-info h3 {
            margin-top: 0;
            color: #333;
        }
        
        .debug-info pre {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        
        .character-count {
            text-align: right;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .character-count.warning {
            color: #ff6b35;
        }
        
        .character-count.error {
            color: #dc3545;
        }
        
        .api-config {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .api-config h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .api-config input {
            margin-bottom: 10px;
        }
        
        .tts-engine-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .engine-option {
            flex: 1;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .engine-option:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }
        
        .engine-option.selected {
            border-color: #007bff;
            background-color: #e3f2fd;
        }
        
        .engine-option input[type="radio"] {
            margin-right: 5px;
        }
        
        .voice-category {
            margin-bottom: 25px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .category-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 600;
            border-bottom: 1px solid #e9ecef;
        }
        
        .voice-category .voice-options {
            padding: 15px;
            background-color: #fafbfc;
        }
        
        .voice-category .voice-option {
            background-color: white;
            border: 1px solid #e9ecef;
            margin-bottom: 10px;
        }
        
        .voice-category .voice-option:last-child {
            margin-bottom: 0;
        }
        
        .voice-category .voice-option:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.1);
        }
        
        .voice-category .voice-option.selected {
            border-color: #007bff;
            background-color: #e3f2fd;
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé§ Áã¨Á´ãTTSË∞ÉËØïÈ°µÈù¢</h1>
        
        <div class="api-config">
            <h3>üîë APIÈÖçÁΩÆ</h3>
            <div class="form-group">
                <label for="baiduAK">ÁôæÂ∫¶API Key (AK):</label>
                <input type="text" id="baiduAK" placeholder="ËØ∑ËæìÂÖ•ÁôæÂ∫¶API Key" value="FeNVdlSqSTt9IO3Bz4SCDiVj">
            </div>
            <div class="form-group">
                <label for="baiduSK">ÁôæÂ∫¶Secret Key (SK):</label>
                <input type="text" id="baiduSK" placeholder="ËØ∑ËæìÂÖ•ÁôæÂ∫¶Secret Key" value="NL9bpxsOt7pxf1m3v43G5vPD5CIjoSFo">
            </div>
        </div>
        
        <div class="form-group">
            <label>TTSÂºïÊìéÈÄâÊã©Ôºö</label>
            <div class="tts-engine-selector">
                <div class="engine-option" data-engine="baidu">
                    <input type="radio" name="engine" value="baidu" id="engine-baidu" checked>
                    <label for="engine-baidu">ÁôæÂ∫¶TTS</label>
                </div>
                <div class="engine-option" data-engine="browser">
                    <input type="radio" name="engine" value="browser" id="engine-browser">
                    <label for="engine-browser">ÊµèËßàÂô®TTS</label>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <label for="textInput">Ë¶ÅÂêàÊàêÁöÑÊñáÊú¨Ôºö</label>
            <textarea id="textInput" placeholder="ËØ∑ËæìÂÖ•Ë¶ÅÂêàÊàêÁöÑÊñáÊú¨Ôºå‰∏çË∂ÖËøá60‰∏™Â≠óÁ¨¶..." maxlength="60"></textarea>
            <div id="charCount" class="character-count">0/60 Â≠óÁ¨¶</div>
        </div>
        
        <div class="form-group" id="baiduVoiceSection">
            <label>ÈÄâÊã©ËØ≠Èü≥ËßíËâ≤Ôºö</label>
            
            <!-- Âü∫Á°ÄÈü≥Â∫ì -->
            <div class="voice-category">
                <h4 class="category-title">üéµ Âü∫Á°ÄÈü≥Â∫ì</h4>
                <div class="voice-options">
                    <div class="voice-option" data-voice="baidu-0">
                        <input type="radio" name="voice" value="baidu-0" id="voice-0">
                        <label for="voice-0">
                            <div class="voice-name">Â∫¶Â∞èÁæé (Ê†áÂáÜÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-1">
                        <input type="radio" name="voice" value="baidu-1" id="voice-1">
                        <label for="voice-1">
                            <div class="voice-name">Â∫¶Â∞èÂÆá (‰∫≤ÂàáÁî∑Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4140">
                        <input type="radio" name="voice" value="baidu-4140" id="voice-3">
                        <label for="voice-3">
                            <div class="voice-name">Â∫¶ÈÄçÈÅ• (ÊÉÖÊÑüÁî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4">
                        <input type="radio" name="voice" value="baidu-4" id="voice-4">
                        <label for="voice-4">
                            <div class="voice-name">Â∫¶‰∏´‰∏´ (Á´•Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Á≤æÂìÅÈü≥Â∫ì -->
            <div class="voice-category">
                <h4 class="category-title">‚≠ê Á≤æÂìÅÈü≥Â∫ì</h4>
                <div class="voice-options">
                    <div class="voice-option" data-voice="baidu-5003">
                        <input type="radio" name="voice" value="baidu-5003" id="voice-5003">
                        <label for="voice-5003">
                            <div class="voice-name">Â∫¶ÈÄçÈÅ• (ÊÉÖÊÑüÁî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5118">
                        <input type="radio" name="voice" value="baidu-5118" id="voice-5118">
                        <label for="voice-5118">
                            <div class="voice-name">Â∫¶Â∞èÈπø (ÁîúÁæéÂ•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-106">
                        <input type="radio" name="voice" value="baidu-106" id="voice-106">
                        <label for="voice-106">
                            <div class="voice-name">Â∫¶ÂçöÊñá (‰∏ì‰∏öÁî∑‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-103">
                        <input type="radio" name="voice" value="baidu-103" id="voice-103">
                        <label for="voice-103">
                            <div class="voice-name">Â∫¶Á±≥Êúµ (ÂèØÁà±Á´•Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-110" checked>
                        <input type="radio" name="voice" value="baidu-110" id="voice-110">
                        <label for="voice-110">
                            <div class="voice-name">Â∫¶Â∞èÁ´• (Á´•Â£∞‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-111">
                        <input type="radio" name="voice" value="baidu-111" id="voice-111">
                        <label for="voice-111">
                            <div class="voice-name">Â∫¶Â∞èËêå (ËΩØËêåÂ¶πÂ≠ê)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5">
                        <input type="radio" name="voice" value="baidu-5" id="voice-5">
                        <label for="voice-5">
                            <div class="voice-name">Â∫¶Â∞èÂ®á (ÊàêÁÜüÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- ËáªÂìÅÈü≥Â∫ì -->
            <div class="voice-category">
                <h4 class="category-title">üíé ËáªÂìÅÈü≥Â∫ì</h4>
                <div class="voice-options">
                    <div class="voice-option" data-voice="baidu-4003">
                        <input type="radio" name="voice" value="baidu-4003" id="voice-4003">
                        <label for="voice-4003">
                            <div class="voice-name">Â∫¶ÈÄçÈÅ• (ÊÉÖÊÑüÁî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4106">
                        <input type="radio" name="voice" value="baidu-4106" id="voice-4106">
                        <label for="voice-4106">
                            <div class="voice-name">Â∫¶ÂçöÊñá (‰∏ì‰∏öÁî∑‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4115">
                        <input type="radio" name="voice" value="baidu-4115" id="voice-4115">
                        <label for="voice-4115">
                            <div class="voice-name">Â∫¶Â∞èË¥§ (ÁîµÂè∞Áî∑‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5147">
                        <input type="radio" name="voice" value="baidu-5147" id="voice-5147">
                        <label for="voice-5147">
                            <div class="voice-name">Â∫¶Â∏∏Áõà (ÁîµÂè∞Â•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5976">
                        <input type="radio" name="voice" value="baidu-5976" id="voice-5976">
                        <label for="voice-5976">
                            <div class="voice-name">Â∫¶Â∞èÁöÆ (ËêåÂ®ÉÁ´•Â£∞)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5971">
                        <input type="radio" name="voice" value="baidu-5971" id="voice-5971">
                        <label for="voice-5971">
                            <div class="voice-name">Â∫¶ÁöÆÁâπ (ËÄÅÂ§ñÁî∑Â£∞)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4164">
                        <input type="radio" name="voice" value="baidu-4164" id="voice-4164">
                        <label for="voice-4164">
                            <div class="voice-name">Â∫¶ÈòøËÇØ (‰∏ªÊí≠Áî∑Â£∞)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4176">
                        <input type="radio" name="voice" value="baidu-4176" id="voice-4176">
                        <label for="voice-4176">
                            <div class="voice-name">Â∫¶Êúâ‰∏∫ (Á£ÅÊÄßÁî∑Â£∞)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4259">
                        <input type="radio" name="voice" value="baidu-4259" id="voice-4259">
                        <label for="voice-4259">
                            <div class="voice-name">Â∫¶Â∞èÊñ∞ (Êí≠Èü≥Â•≥Â£∞)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4119">
                        <input type="radio" name="voice" value="baidu-4119" id="voice-4119">
                        <label for="voice-4119">
                            <div class="voice-name">Â∫¶Â∞èÈπø (ÁîúÁæéÂ•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4105">
                        <input type="radio" name="voice" value="baidu-4105" id="voice-4105">
                        <label for="voice-4105">
                            <div class="voice-name">Â∫¶ÁÅµÂÑø (Ê∏ÖÊøÄÂ•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4117">
                        <input type="radio" name="voice" value="baidu-4117" id="voice-4117">
                        <label for="voice-4117">
                            <div class="voice-name">Â∫¶Â∞è‰πî (Ê¥ªÊ≥ºÂ•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4288">
                        <input type="radio" name="voice" value="baidu-4288" id="voice-4288">
                        <label for="voice-4288">
                            <div class="voice-name">Â∫¶Êô¥Â≤ö (ÁîúÁæéÂ•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4192">
                        <input type="radio" name="voice" value="baidu-4192" id="voice-4192">
                        <label for="voice-4192">
                            <div class="voice-name">Â∫¶ÈùíÂ∑ù (Ê∏©ÊüîÁî∑Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4100">
                        <input type="radio" name="voice" value="baidu-4100" id="voice-4100">
                        <label for="voice-4100">
                            <div class="voice-name">Â∫¶Â∞èÈõØ (Ê¥ªÂäõÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4103">
                        <input type="radio" name="voice" value="baidu-4103" id="voice-4103">
                        <label for="voice-4103">
                            <div class="voice-name">Â∫¶Á±≥Êúµ (ÂèØÁà±Â•≥Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4144">
                        <input type="radio" name="voice" value="baidu-4144" id="voice-4144">
                        <label for="voice-4144">
                            <div class="voice-name">Â∫¶ÂßóÂßó (Â®±‰πêÂ•≥Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4278">
                        <input type="radio" name="voice" value="baidu-4278" id="voice-4278">
                        <label for="voice-4278">
                            <div class="voice-name">Â∫¶Â∞èË¥ù (Áü•ËØÜÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4143">
                        <input type="radio" name="voice" value="baidu-4143" id="voice-4143">
                        <label for="voice-4143">
                            <div class="voice-name">Â∫¶Ê∏ÖÈ£é (ÈÖçÈü≥Áî∑Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4140">
                        <input type="radio" name="voice" value="baidu-4140" id="voice-4140">
                        <label for="voice-4140">
                            <div class="voice-name">Â∫¶Â∞èÊñ∞ (‰∏ì‰∏öÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4129">
                        <input type="radio" name="voice" value="baidu-4129" id="voice-4129">
                        <label for="voice-4129">
                            <div class="voice-name">Â∫¶Â∞èÂΩ¶ (Áü•ËØÜÁî∑‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4149">
                        <input type="radio" name="voice" value="baidu-4149" id="voice-4149">
                        <label for="voice-4149">
                            <div class="voice-name">Â∫¶ÊòüÊ≤≥ (ÂπøÂëäÁî∑Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4254">
                        <input type="radio" name="voice" value="baidu-4254" id="voice-4254">
                        <label for="voice-4254">
                            <div class="voice-name">Â∫¶Â∞èÊ∏Ö (ÂπøÂëäÂ•≥Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4206">
                        <input type="radio" name="voice" value="baidu-4206" id="voice-4206">
                        <label for="voice-4206">
                            <div class="voice-name">Â∫¶ÂçöÊñá (ÁªºËâ∫Áî∑Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4147">
                        <input type="radio" name="voice" value="baidu-4147" id="voice-4147">
                        <label for="voice-4147">
                            <div class="voice-name">Â∫¶‰∫ëÊúµ (ÂèØÁà±Á´•Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4141">
                        <input type="radio" name="voice" value="baidu-4141" id="voice-4141">
                        <label for="voice-4141">
                            <div class="voice-name">Â∫¶Â©âÂ©â (ÁîúÁæéÂ•≥Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4226">
                        <input type="radio" name="voice" value="baidu-4226" id="voice-4226">
                        <label for="voice-4226">
                            <div class="voice-name">ÂçóÊñπ (ÁîµÂè∞Â•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6205">
                        <input type="radio" name="voice" value="baidu-6205" id="voice-6205">
                        <label for="voice-6205">
                            <div class="voice-name">Â∫¶ÊÇ†ÁÑ∂ (ÊóÅÁôΩÁî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6221">
                        <input type="radio" name="voice" value="baidu-6221" id="voice-6221">
                        <label for="voice-6221">
                            <div class="voice-name">Â∫¶‰∫ëËê± (ÊóÅÁôΩÂ•≥Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6546">
                        <input type="radio" name="voice" value="baidu-6546" id="voice-6546">
                        <label for="voice-6546">
                            <div class="voice-name">Â∫¶Ê∏ÖË±™ (ÈÄçÈÅ•‰æ†ÂÆ¢)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6602">
                        <input type="radio" name="voice" value="baidu-6602" id="voice-6602">
                        <label for="voice-6602">
                            <div class="voice-name">Â∫¶Ê∏ÖÊüî (Ê∏©ÊüîÁî∑Á•û)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6562">
                        <input type="radio" name="voice" value="baidu-6562" id="voice-6562">
                        <label for="voice-6562">
                            <div class="voice-name">Â∫¶Èõ®Ê•† (ÂÖÉÊ∞îÂ∞ëÂ•≥)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6543">
                        <input type="radio" name="voice" value="baidu-6543" id="voice-6543">
                        <label for="voice-6543">
                            <div class="voice-name">Â∫¶Èõ®Ëêå (ÈÇªÂÆ∂Â•≥Â≠©)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6747">
                        <input type="radio" name="voice" value="baidu-6747" id="voice-6747">
                        <label for="voice-6747">
                            <div class="voice-name">Â∫¶‰π¶Âè§ (ÊÉÖÊÑüÁî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6748">
                        <input type="radio" name="voice" value="baidu-6748" id="voice-6748">
                        <label for="voice-6748">
                            <div class="voice-name">Â∫¶‰π¶‰∏• (Ê≤âÁ®≥Áî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6746">
                        <input type="radio" name="voice" value="baidu-6746" id="voice-6746">
                        <label for="voice-6746">
                            <div class="voice-name">Â∫¶‰π¶ÈÅì (Ê≤âÁ®≥Áî∑Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6644">
                        <input type="radio" name="voice" value="baidu-6644" id="voice-6644">
                        <label for="voice-6644">
                            <div class="voice-name">Â∫¶‰π¶ÂÆÅ (‰∫≤ÂíåÂ•≥Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4148">
                        <input type="radio" name="voice" value="baidu-4148" id="voice-4148">
                        <label for="voice-4148">
                            <div class="voice-name">Â∫¶Â∞èÂ§è (ÁîúÁæéÂ•≥Â£∞)</div>
                            <div class="voice-description">Â∞èËØ¥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4277">
                        <input type="radio" name="voice" value="baidu-4277" id="voice-4277">
                        <label for="voice-4277">
                            <div class="voice-name">Ë•øË¥ù (ËÑ±Âè£ÁßÄÂ•≥Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-4114">
                        <input type="radio" name="voice" value="baidu-4114" id="voice-4114">
                        <label for="voice-4114">
                            <div class="voice-name">ÈòøÈæô (ËØ¥‰π¶Áî∑Â£∞)</div>
                            <div class="voice-description">ÈÖçÈü≥ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-5153">
                        <input type="radio" name="voice" value="baidu-5153" id="voice-5153">
                        <label for="voice-5153">
                            <div class="voice-name">Â∫¶Â∏∏ÊÇ¶ (Ê∞ëÁîüÂ•≥‰∏ªÊí≠)</div>
                            <div class="voice-description">ËµÑËÆØ | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                    
                    <div class="voice-option" data-voice="baidu-6561">
                        <input type="radio" name="voice" value="baidu-6561" id="voice-6561">
                        <label for="voice-6561">
                            <div class="voice-name">Â∫¶Â∞è‰πê (ÂèØÁà±Á´•Â£∞)</div>
                            <div class="voice-description">ÂØπËØùÂä©Êâã | ‰∏≠Êñá/Ëã±Êñá</div>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-group" id="browserVoiceSection" style="display: none;">
            <label for="browserVoiceSelect">ÈÄâÊã©ËØ≠Èü≥Ôºö</label>
            <select id="browserVoiceSelect">
                <option value="">Âä†ËΩΩ‰∏≠...</option>
            </select>
        </div>
        
        <div class="controls">
            <button id="testBtn" class="btn-primary">üéµ ÊµãËØïËØ≠Èü≥ÂêàÊàê</button>
            <button id="clearBtn" class="btn-secondary">üóëÔ∏è Ê∏ÖÁ©∫ÊñáÊú¨</button>
            <button id="testTokenBtn" class="btn-success">üîë ÊµãËØïAPI Token</button>
        </div>
        
        <div id="status" class="status" style="display: none;"></div>
        
        <div class="audio-controls" id="audioControls" style="display: none;">
            <h3>ÁîüÊàêÁöÑÈü≥È¢ëÔºö</h3>
            <audio id="audioPlayer" controls></audio>
        </div>
        
        <div class="debug-info" id="debugInfo" style="display: none;">
            <h3>Ë∞ÉËØï‰ø°ÊÅØÔºö</h3>
            <pre id="debugContent"></pre>
        </div>
    </div>

    <script>
        class StandaloneTTSDebugger {
            constructor() {
                this.textInput = document.getElementById('textInput');
                this.charCount = document.getElementById('charCount');
                this.testBtn = document.getElementById('testBtn');
                this.clearBtn = document.getElementById('clearBtn');
                this.testTokenBtn = document.getElementById('testTokenBtn');
                this.status = document.getElementById('status');
                this.audioControls = document.getElementById('audioControls');
                this.audioPlayer = document.getElementById('audioPlayer');
                this.debugInfo = document.getElementById('debugInfo');
                this.debugContent = document.getElementById('debugContent');
                this.baiduAK = document.getElementById('baiduAK');
                this.baiduSK = document.getElementById('baiduSK');
                this.browserVoiceSelect = document.getElementById('browserVoiceSelect');
                this.baiduVoiceSection = document.getElementById('baiduVoiceSection');
                this.browserVoiceSection = document.getElementById('browserVoiceSection');
                
                this.init();
            }
            
            init() {
                // ËÆæÁΩÆÈªòËÆ§ÊñáÊú¨
                this.textInput.value = 'Â≠¶‰ºöÁî® Scratch ÁöÑÈîÆÁõòÊ£ÄÊµã„ÄÅËßíËâ≤ÁßªÂä®ÂíåËØ¥ËØùÁßØÊú®ÔºåÂà∂‰Ωú‰∏Ä‰∏™ÂèØ‰ª•ÈîÆÁõòÊéßÂà∂Áå´Âí™ÁßªÂä®Âπ∂ËØ¥ËØùÁöÑ‰∫íÂä®Á®ãÂ∫èÔºÅ';
                this.updateCharCount();
                
                // ÁªëÂÆö‰∫ã‰ª∂
                this.textInput.addEventListener('input', () => this.updateCharCount());
                this.testBtn.addEventListener('click', () => this.testTTS());
                this.clearBtn.addEventListener('click', () => this.clearText());
                this.testTokenBtn.addEventListener('click', () => this.testBaiduToken());
                
                // ËØ≠Èü≥ÈÄâÊã©‰∫ã‰ª∂
                document.querySelectorAll('.voice-option').forEach(option => {
                    option.addEventListener('click', () => this.selectVoice(option));
                });
                
                // ÂºïÊìéÈÄâÊã©‰∫ã‰ª∂
                document.querySelectorAll('.engine-option').forEach(option => {
                    option.addEventListener('click', () => this.selectEngine(option));
                });
                
                // ÈªòËÆ§ÈÄâÊã©Â∫¶Â∞èÁ´•ÔºàÁ≤æÂìÅÈü≥Â∫ìÔºâ
                document.querySelector('[data-voice="baidu-110"]').classList.add('selected');
                document.querySelector('[data-engine="baidu"]').classList.add('selected');
                
                // Âä†ËΩΩÊµèËßàÂô®ËØ≠Èü≥
                this.loadBrowserVoices();
            }
            
            updateCharCount() {
                const count = this.textInput.value.length;
                const maxCount = 60;
                this.charCount.textContent = `${count}/${maxCount} Â≠óÁ¨¶`;
                
                if (count > maxCount) {
                    this.charCount.className = 'character-count error';
                } else if (count > maxCount * 0.8) {
                    this.charCount.className = 'character-count warning';
                } else {
                    this.charCount.className = 'character-count';
                }
            }
            
            selectVoice(option) {
                // ÁßªÈô§ÊâÄÊúâÈÄâ‰∏≠Áä∂ÊÄÅ
                document.querySelectorAll('.voice-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Ê∑ªÂä†ÈÄâ‰∏≠Áä∂ÊÄÅ
                option.classList.add('selected');
                
                // ÈÄâ‰∏≠ÂØπÂ∫îÁöÑradioÊåâÈíÆ
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = true;
            }
            
            selectEngine(option) {
                // ÁßªÈô§ÊâÄÊúâÈÄâ‰∏≠Áä∂ÊÄÅ
                document.querySelectorAll('.engine-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Ê∑ªÂä†ÈÄâ‰∏≠Áä∂ÊÄÅ
                option.classList.add('selected');
                
                // ÈÄâ‰∏≠ÂØπÂ∫îÁöÑradioÊåâÈíÆ
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = true;
                
                // ÊòæÁ§∫/ÈöêËóèÁõ∏Â∫îÁöÑËØ≠Èü≥ÈÄâÊã©Âå∫Âüü
                const engine = radio.value;
                if (engine === 'baidu') {
                    this.baiduVoiceSection.style.display = 'block';
                    this.browserVoiceSection.style.display = 'none';
                } else {
                    this.baiduVoiceSection.style.display = 'none';
                    this.browserVoiceSection.style.display = 'block';
                }
            }
            
            async loadBrowserVoices() {
                try {
                    // Á≠âÂæÖËØ≠Èü≥ÂàóË°®Âä†ËΩΩ
                    await new Promise(resolve => {
                        if (speechSynthesis.getVoices().length > 0) {
                            resolve();
                        } else {
                            speechSynthesis.addEventListener('voiceschanged', resolve, { once: true });
                        }
                    });
                    
                    const voices = speechSynthesis.getVoices();
                    const chineseVoices = voices.filter(voice => 
                        voice.lang.startsWith('zh') || 
                        voice.name.includes('Chinese') || 
                        voice.name.includes('‰∏≠Êñá')
                    );
                    
                    this.browserVoiceSelect.innerHTML = '';
                    
                    if (chineseVoices.length > 0) {
                        chineseVoices.forEach(voice => {
                            const option = document.createElement('option');
                            option.value = voice.name;
                            option.textContent = `${voice.name} (${voice.lang})`;
                            this.browserVoiceSelect.appendChild(option);
                        });
                    } else {
                        // Â¶ÇÊûúÊ≤°Êúâ‰∏≠ÊñáËØ≠Èü≥ÔºåÊòæÁ§∫ÊâÄÊúâËØ≠Èü≥
                        voices.forEach(voice => {
                            const option = document.createElement('option');
                            option.value = voice.name;
                            option.textContent = `${voice.name} (${voice.lang})`;
                            this.browserVoiceSelect.appendChild(option);
                        });
                    }
                    
                    console.log('Âä†ËΩΩ‰∫Ü', voices.length, '‰∏™ÊµèËßàÂô®ËØ≠Èü≥ÔºåÂÖ∂‰∏≠', chineseVoices.length, '‰∏™‰∏≠ÊñáËØ≠Èü≥');
                } catch (error) {
                    console.error('Âä†ËΩΩÊµèËßàÂô®ËØ≠Èü≥Â§±Ë¥•:', error);
                    this.browserVoiceSelect.innerHTML = '<option value="">Âä†ËΩΩÂ§±Ë¥•</option>';
                }
            }
            
            clearText() {
                this.textInput.value = '';
                this.updateCharCount();
                this.hideStatus();
                this.hideAudioControls();
                this.hideDebugInfo();
            }
            
            showStatus(message, type = 'info') {
                this.status.textContent = message;
                this.status.className = `status ${type}`;
                this.status.style.display = 'block';
            }
            
            hideStatus() {
                this.status.style.display = 'none';
            }
            
            showAudioControls(audioData) {
                this.audioPlayer.src = audioData;
                this.audioControls.style.display = 'block';
            }
            
            hideAudioControls() {
                this.audioControls.style.display = 'none';
            }
            
            showDebugInfo(info) {
                this.debugContent.textContent = JSON.stringify(info, null, 2);
                this.debugInfo.style.display = 'block';
            }
            
            hideDebugInfo() {
                this.debugInfo.style.display = 'none';
            }
            
            async testBaiduToken() {
                const ak = this.baiduAK.value.trim();
                const sk = this.baiduSK.value.trim();
                
                if (!ak || !sk) {
                    this.showStatus('ËØ∑ËæìÂÖ•ÁôæÂ∫¶API KeyÂíåSecret KeyÔºÅ', 'error');
                    return;
                }
                
                this.testTokenBtn.disabled = true;
                this.testTokenBtn.textContent = 'üîÑ ÊµãËØï‰∏≠...';
                this.showStatus('Ê≠£Âú®ÊµãËØïÁôæÂ∫¶API Token...', 'loading');
                
                try {
                    const token = await this.getBaiduAccessToken(ak, sk);
                    this.showStatus(`‚úÖ API TokenÊµãËØïÊàêÂäüÔºÅToken: ${token.substring(0, 20)}...`, 'success');
                    
                    this.showDebugInfo({
                        success: true,
                        token: token.substring(0, 20) + '...',
                        fullTokenLength: token.length,
                        timestamp: new Date().toISOString()
                    });
                } catch (error) {
                    console.error('TokenÊµãËØïÂ§±Ë¥•:', error);
                    this.showStatus(`‚ùå API TokenÊµãËØïÂ§±Ë¥•: ${error.message}`, 'error');
                    
                    this.showDebugInfo({
                        error: {
                            message: error.message,
                            stack: error.stack
                        },
                        ak: ak.substring(0, 10) + '...',
                        sk: sk.substring(0, 10) + '...',
                        timestamp: new Date().toISOString()
                    });
                } finally {
                    this.testTokenBtn.disabled = false;
                    this.testTokenBtn.textContent = 'üîë ÊµãËØïAPI Token';
                }
            }
            
            async getBaiduAccessToken(ak, sk) {
                // ‰ΩøÁî®‰ª£ÁêÜÊúçÂä°Âô®ÁªïËøáCORSÈôêÂà∂
                const proxyUrl = '/proxy/baidu-token';
                console.log('ÈÄöËøá‰ª£ÁêÜËé∑ÂèñÁôæÂ∫¶API tokenÔºåURL:', proxyUrl);
                
                const formData = new URLSearchParams();
                formData.append('ak', ak);
                formData.append('sk', sk);
                
                const response = await fetch(proxyUrl, { 
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: formData
                });
                console.log('ÁôæÂ∫¶API tokenÂìçÂ∫îÁä∂ÊÄÅ:', response.status, response.statusText);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('ÁôæÂ∫¶API tokenËØ∑Ê±ÇÂ§±Ë¥•ÔºåÂìçÂ∫îÂÜÖÂÆπ:', errorText);
                    throw new Error(`Ëé∑ÂèñÁôæÂ∫¶API tokenÂ§±Ë¥•: ${response.status} - ${errorText}`);
                }
                
                const data = await response.json();
                console.log('ÁôæÂ∫¶API tokenÂìçÂ∫îÊï∞ÊçÆÈîÆ:', Object.keys(data));
                
                if (data.error) {
                    throw new Error(`ÁôæÂ∫¶APIËÆ§ËØÅÂ§±Ë¥•: ${data.error_description || data.error}`);
                }
                
                if (!data.access_token) {
                    throw new Error('ÁôæÂ∫¶APIÂìçÂ∫î‰∏≠Ê≤°Êúâaccess_token');
                }
                
                return data.access_token;
            }
            
            async testTTS() {
                const text = this.textInput.value.trim();
                if (!text) {
                    this.showStatus('ËØ∑ËæìÂÖ•Ë¶ÅÂêàÊàêÁöÑÊñáÊú¨ÔºÅ', 'error');
                    return;
                }
                
                const selectedEngine = document.querySelector('input[name="engine"]:checked');
                if (!selectedEngine) {
                    this.showStatus('ËØ∑ÈÄâÊã©TTSÂºïÊìéÔºÅ', 'error');
                    return;
                }
                
                const engine = selectedEngine.value;
                
                if (engine === 'baidu') {
                    if (text.length > 60) {
                        this.showStatus('ÁôæÂ∫¶TTSÊñáÊú¨ÈïøÂ∫¶‰∏çËÉΩË∂ÖËøá60‰∏™Â≠óÁ¨¶ÔºÅ', 'error');
                        return;
                    }
                    
                    const selectedVoice = document.querySelector('input[name="voice"]:checked');
                    if (!selectedVoice) {
                        this.showStatus('ËØ∑ÈÄâÊã©ËØ≠Èü≥ËßíËâ≤ÔºÅ', 'error');
                        return;
                    }
                    
                    await this.testBaiduTTS(text, selectedVoice.value);
                } else if (engine === 'browser') {
                    await this.testBrowserTTS(text);
                }
            }
            
            async testBaiduTTS(text, voice) {
                const ak = this.baiduAK.value.trim();
                const sk = this.baiduSK.value.trim();
                
                if (!ak || !sk) {
                    this.showStatus('ËØ∑ËæìÂÖ•ÁôæÂ∫¶API KeyÂíåSecret KeyÔºÅ', 'error');
                    return;
                }
                
                this.testBtn.disabled = true;
                this.testBtn.textContent = 'üîÑ ÂêàÊàê‰∏≠...';
                this.showStatus('Ê≠£Âú®Ë∞ÉÁî®ÁôæÂ∫¶TTS API...', 'loading');
                this.hideAudioControls();
                this.hideDebugInfo();
                
                try {
                    const startTime = Date.now();
                    
                    // Ëé∑Âèñaccess token
                    const accessToken = await this.getBaiduAccessToken(ak, sk);
                    
                    // ‰ªéËØ≠Èü≥ÈÄâÊã©‰∏≠ÊèêÂèñËØ≠Èü≥ID
                    const voiceId = voice.replace('baidu-', '');
                    
                    // Áõ¥Êé•‰º†ËæìÂ≠óÁ¨¶‰∏≤ÊñáÊú¨Ôºå‰∏çËøõË°åÁºñÁ†Å
                    console.log(`ÂéüÂßãÊñáÊú¨: "${text}"`);
                    console.log(`Áõ¥Êé•‰º†ËæìÊñáÊú¨: "${text}"`);
                    
                    // Ê†πÊçÆÂÆòÊñπAPIÊñáÊ°£ÊûÑÂª∫ËØ∑Ê±ÇÊï∞ÊçÆ
                    const requestData = {
                        tex: text,   // Áõ¥Êé•‰º†ËæìÂ≠óÁ¨¶‰∏≤ÊñáÊú¨
                        tok: accessToken,   // ËÆøÈóÆ‰ª§Áâå
                        cuid: 'Lb4nwynEiEtTYmg6L7VlgxYPKUDS76Mg', // Áî®Êà∑ÂîØ‰∏ÄÊ†áËØÜ
                        ctp: '1',          // ÂÆ¢Êà∑Á´ØÁ±ªÂûãÔºåwebÁ´ØÂ°´ÂÜôÂõ∫ÂÆöÂÄº1
                        lan: 'zh',         // ËØ≠Ë®ÄÈÄâÊã©ÔºåÂõ∫ÂÆöÂÄºzh
                        spd: '5',          // ËØ≠ÈÄüÔºåÂèñÂÄº0-15ÔºåÈªòËÆ§‰∏∫5
                        pit: '5',          // Èü≥Ë∞ÉÔºåÂèñÂÄº0-15ÔºåÈªòËÆ§‰∏∫5
                        vol: '5',          // Èü≥ÈáèÔºåÂèñÂÄº0-15ÔºåÈªòËÆ§‰∏∫5
                        per: voiceId,      // ËØ≠Èü≥‰∫∫ÈÄâÊã©
                        aue: '3'           // Èü≥È¢ëÊ†ºÂºèÔºö3‰∏∫mp3Ê†ºÂºè(ÈªòËÆ§)
                    };
                    
                    console.log('ÁôæÂ∫¶TTSËØ∑Ê±ÇÊï∞ÊçÆ:', requestData);
                    
                    // ÊûÑÂª∫form data
                    const formData = new URLSearchParams();
                    Object.keys(requestData).forEach(key => {
                        formData.append(key, requestData[key]);
                    });
                    
                    // ÈÄöËøá‰ª£ÁêÜÂèëÈÄÅËØ∑Ê±Ç
                    const response = await fetch('/proxy/baidu-tts', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                            'Accept': '*/*'
                        },
                        body: formData
                    });
                    
                    const endTime = Date.now();
                    const duration = endTime - startTime;
                    
                    console.log('ÁôæÂ∫¶TTSÂìçÂ∫îÁä∂ÊÄÅ:', response.status, response.statusText);
                    
                    if (!response.ok) {
                        const errorText = await response.text();
                        throw new Error(`ÁôæÂ∫¶TTSËØ∑Ê±ÇÂ§±Ë¥•: ${response.status} - ${errorText}`);
                    }
                    
                    // Ê£ÄÊü•ÂìçÂ∫îÂÜÖÂÆπÁ±ªÂûã
                    const contentType = response.headers.get('content-type');
                    console.log('ÂìçÂ∫îÂÜÖÂÆπÁ±ªÂûã:', contentType);
                    
                    if (contentType && contentType.includes('application/json')) {
                        // Â¶ÇÊûúËøîÂõûÁöÑÊòØJSONÔºåËØ¥ÊòéÊúâÈîôËØØ
                        const errorData = await response.json();
                        throw new Error(`ÁôæÂ∫¶TTSÈîôËØØ: ${errorData.error_msg || JSON.stringify(errorData)}`);
                    }
                    
                    // Ëé∑ÂèñÈü≥È¢ëÊï∞ÊçÆ
                    const audioBlob = await response.blob();
                    console.log('Èü≥È¢ëÊï∞ÊçÆÂ§ßÂ∞è:', audioBlob.size, 'bytes');
                    
                    if (audioBlob.size === 0) {
                        throw new Error('ÁôæÂ∫¶TTSËøîÂõûÁöÑÈü≥È¢ëÊï∞ÊçÆ‰∏∫Á©∫');
                    }
                    
                    // ÂàõÂª∫Èü≥È¢ëURL
                    const audioUrl = URL.createObjectURL(audioBlob);
                    
                    // ÊòæÁ§∫ÊàêÂäüÁä∂ÊÄÅ
                    this.showStatus(`‚úÖ ÁôæÂ∫¶TTSËØ≠Èü≥ÂêàÊàêÊàêÂäüÔºÅËÄóÊó∂: ${duration}ms`, 'success');
                    
                    // ÊòæÁ§∫Èü≥È¢ëÊéß‰ª∂
                    this.showAudioControls(audioUrl);
                    
                    // ÊòæÁ§∫Ë∞ÉËØï‰ø°ÊÅØ
                    this.showDebugInfo({
                        request: {
                            text: text,
                            voice: voice,
                            voiceId: voiceId,
                            textLength: text.length,
                            encodingMethod: 'direct_transmission'
                        },
                        response: {
                            success: true,
                            audioDataSize: audioBlob.size,
                            contentType: contentType,
                            duration: `${duration}ms`
                        },
                        timestamp: new Date().toISOString()
                    });
                    
                } catch (error) {
                    console.error('ÁôæÂ∫¶TTSÊµãËØïÂ§±Ë¥•:', error);
                    this.showStatus(`‚ùå ÁôæÂ∫¶TTSËØ≠Èü≥ÂêàÊàêÂ§±Ë¥•: ${error.message}`, 'error');
                    
                    // ÊòæÁ§∫ÈîôËØØË∞ÉËØï‰ø°ÊÅØ
                    this.showDebugInfo({
                        error: {
                            message: error.message,
                            stack: error.stack
                        },
                        request: {
                            text: text,
                            voice: voice,
                            textLength: text.length
                        },
                        timestamp: new Date().toISOString()
                    });
                } finally {
                    this.testBtn.disabled = false;
                    this.testBtn.textContent = 'üéµ ÊµãËØïËØ≠Èü≥ÂêàÊàê';
                }
            }
            
            async testBrowserTTS(text) {
                this.testBtn.disabled = true;
                this.testBtn.textContent = 'üîÑ ÂêàÊàê‰∏≠...';
                this.showStatus('Ê≠£Âú®‰ΩøÁî®ÊµèËßàÂô®TTS...', 'loading');
                this.hideAudioControls();
                this.hideDebugInfo();
                
                try {
                    const startTime = Date.now();
                    
                    // ÂÅúÊ≠¢ÂΩìÂâçÊí≠Êîæ
                    speechSynthesis.cancel();
                    
                    // ÂàõÂª∫ËØ≠Èü≥ÂêàÊàêÂØπË±°
                    const utterance = new SpeechSynthesisUtterance(text);
                    
                    // ËÆæÁΩÆËØ≠Èü≥
                    const selectedVoiceName = this.browserVoiceSelect.value;
                    if (selectedVoiceName) {
                        const voices = speechSynthesis.getVoices();
                        const selectedVoice = voices.find(voice => voice.name === selectedVoiceName);
                        if (selectedVoice) {
                            utterance.voice = selectedVoice;
                        }
                    }
                    
                    // ËÆæÁΩÆËØ≠Èü≥ÂèÇÊï∞
                    utterance.rate = 1.0;    // ËØ≠ÈÄü
                    utterance.pitch = 1.0;   // Èü≥Ë∞É
                    utterance.volume = 0.8;  // Èü≥Èáè
                    utterance.lang = 'zh-CN'; // ËØ≠Ë®Ä
                    
                    // Á≠âÂæÖËØ≠Èü≥Êí≠ÊîæÂÆåÊàê
                    await new Promise((resolve, reject) => {
                        utterance.onend = () => {
                            const endTime = Date.now();
                            const duration = endTime - startTime;
                            
                            this.showStatus(`‚úÖ ÊµèËßàÂô®TTSÊí≠ÊîæÂÆåÊàêÔºÅËÄóÊó∂: ${duration}ms`, 'success');
                            
                            this.showDebugInfo({
                                request: {
                                    text: text,
                                    voice: selectedVoiceName,
                                    textLength: text.length
                                },
                                response: {
                                    success: true,
                                    duration: `${duration}ms`,
                                    voiceUsed: utterance.voice?.name || 'ÈªòËÆ§ËØ≠Èü≥'
                                },
                                timestamp: new Date().toISOString()
                            });
                            
                            resolve();
                        };
                        
                        utterance.onerror = (error) => {
                            reject(new Error(`ÊµèËßàÂô®TTSÈîôËØØ: ${error.error}`));
                        };
                        
                        // ÂºÄÂßãÊí≠Êîæ
                        speechSynthesis.speak(utterance);
                    });
                    
                } catch (error) {
                    console.error('ÊµèËßàÂô®TTSÊµãËØïÂ§±Ë¥•:', error);
                    this.showStatus(`‚ùå ÊµèËßàÂô®TTSÂ§±Ë¥•: ${error.message}`, 'error');
                    
                    this.showDebugInfo({
                        error: {
                            message: error.message,
                            stack: error.stack
                        },
                        request: {
                            text: text,
                            textLength: text.length
                        },
                        timestamp: new Date().toISOString()
                    });
                } finally {
                    this.testBtn.disabled = false;
                    this.testBtn.textContent = 'üéµ ÊµãËØïËØ≠Èü≥ÂêàÊàê';
                }
            }
        }
        
        // ÂàùÂßãÂåñË∞ÉËØïÂô®
        document.addEventListener('DOMContentLoaded', () => {
            new StandaloneTTSDebugger();
        });
    </script>
</body>
</html>
